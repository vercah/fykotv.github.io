<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FykoTV</title>

    <style>
        body {
            background-image: url("Vlajka_vert.png");
            background-size: 50%;
            overflow: hidden;
            background-position-y: 15%;
            background-position-x: 50%;
            background-color: #1175da;
            background-repeat: no-repeat;
        }
        .strip {
            background: white;
            position: fixed;
            top: 80%;
            width: 100%;
            height: 7%;
            font-size: 5rem;
            font-family: "Inter";
            display: flex;
            left: 0;
        }
        .time {
            background: black;
            color: white;
            padding: 0 1rem;
        }
        .text {
            flex-grow: 4;
            padding: 0 1rem;
            white-space: nowrap;
            overflow: hidden;
            box-sizing: border-box;
            vertical-align: center;
        }
        .text span {
            display: inline-block;
            padding-left: 100%;
            animation: marquee-horizontal 40s linear infinite;
        }
        .ucastnici {
            background: none;
            position: fixed;
            top: 8%;
            width: 26%;
            height: 65%;
            font-size: 2.5rem;
            color: white;
            left: 4%;
            overflow: hidden;
            border-style: double;
            border: #D20000;
            font-family: Inter;
        }
        .pravidla {
            background: none;
            position: fixed;
            top: 10%;
            width: 26%;
            height: 65%;
            font-size: 2.5rem;
            color: white;
            right: 4%;
            overflow: visible;
            display: inline-block;
            text-align: center;
            font-weight: bold;
            font-family: "Inter";
        }
        .pravidla content{
            font-weight: bold;
            animation: marquee-vertical 40s linear infinite;
        }
        .pravidla p {
            display: block;
        }

        .ucastnici table {
            table-layout: fixed;
            width: 100%;
            overflow: hidden;
            animation: marquee-vertical 40s linear infinite;
        }

        td+td {
            text-align: right;
        }
        @keyframes marquee-horizontal {
            0%   { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }

        @keyframes marquee-vertical {
            100%   { transform: translate(0, -100%); }
            0% { transform: translate(0, 0); }
        }

    </style>
</head>
<body>

    <div class="strip"><div class="time" id="time">15:36</div>
        <div class="text"><span id="content">
            Vítáme nové příslušníky vědecké třídy ve Fykoreji. &#8226;
            Večer očekávejte proslov Vůdce. &#8226;
            Řiďte se pravidly režimu. &#8226;
        </span></div>
    </div>

    <div class="ucastnici">
        <div class="text">
            <table>
                <colgroup>
                    <col style="text-align: right">
                </colgroup>
                <tr><td>David Bálek</td><td>-</td></tr>
                <tr><td>Veronika Bartáková</td><td>-</td></tr>
                <tr><td>Matyáš Beran</td><td>-</td></tr>
                <tr><td>Petr Brettschneider</td><td>-</td></tr>
                <tr><td>Anežka Čechová</td><td>-</td></tr>
                <tr><td>Daniel Čvrtečka</td><td>-</td></tr>
                <tr><td>Monika  Drexlerová</td><td>-</td></tr>
                <tr><td>Tereza Hochmanová</td><td>-</td></tr>
                <tr><td>Katarína Horská</td><td>-</td></tr>
                <tr><td>Vladimíra Jiříčková</td><td>-</td></tr>
                <tr><td>Matej Karpáč</td><td>-</td></tr>
                <tr><td>Daniela Karpíšková</td><td>-</td></tr>
                <tr><td>Lucia Kleščová</td><td>-</td></tr>
                <tr><td>Ján Klír</td><td>-</td></tr>
                <tr><td>Tomáš Kubrický</td><td>-</td></tr>
                <tr><td>Vojtěch Kubrycht</td><td>-</td></tr>
                <tr><td>Martin Kysela</td><td>-</td></tr>
                <tr><td>Jan Lepič</td><td>-</td></tr>
                <tr><td>Lukáš Létal</td><td>-</td></tr>
                <tr><td>Lukáš Linhart</td><td>-</td></tr>
                <tr><td>Vojtěch Marek</td><td>-</td></tr>
                <tr><td>Richard Materna</td><td>-</td></tr>
                <tr><td>Matouš Mišta</td><td>-</td></tr>
                <tr><td>Veronika Plevná</td><td>-</td></tr>
                <tr><td>Jaromír Potůček</td><td>-</td></tr>
                <tr><td>Pavel Provazník</td><td>-</td></tr>
                <tr><td>Jakub Savula</td><td>-</td></tr>
                <tr><td>Maxmilian Ladislav Skuda</td><td>-</td></tr>
                <tr><td>Vladimír Slanina</td><td>-</td></tr>
                <tr><td>Michal Stroff</td><td>-</td></tr>
                <tr><td>Pavla Šimová</td><td>-</td></tr>
                <tr><td>Ludmila Šírová</td><td>-</td></tr>
                <tr><td>David Škrob</td><td>-</td></tr>
                <tr><td>Jiří Vestfál</td><td>-</td></tr>
                <tr><td>Mikuláš Vlčan</td><td>-</td></tr>
                <tr><td>Anna Vodáková</td><td>-</td></tr>
                <tr><td>Tereza Voltrová</td><td>-</td></tr>
                <tr><td>Jakub Radim Zbončák</td><td>-</td></tr>
                <tr><td>Martin Zuzek</td><td>-</td></tr>
                <tr><td>Ivan Žemlička</td><td>-</td></tr>
            </table>
        </div>
    </div>

    <div class="pravidla">
        <div class="content">
            <p>Zákaz sezení zády směrem k Velké podobizně Vůdce</p>
            <p>Povinnost vzít si každý den lék</p>
            <p>Povinnost účastnit se ranních vítání Vůdce</p>
            <p>Povinnost poděkovat při vyzvednutí požehnaného jídla</p>
            <p>Povinnost nosit odznak vědecké třídy</p>
        </div>
    </div>
</body>
<script type="text/javascript">
    const updateTime = () => {
        const date = new Date();
        const shift = new Date();
        var showdate = new Date();
        // na obrazovce se zobrazuje reálný čas mínus shift
        shift.setHours(1);
        shift.setMinutes(45);
        showdate.setHours(date.getHours()-shift.getHours());
        showdate.setMinutes(date.getMinutes()-shift.getMinutes());
        document.getElementById('time').innerHTML = showdate.getHours() + ":" + String(showdate.getMinutes()).padStart(2, "0");

    }
    setInterval(updateTime, 5000);
    updateTime();

    const updateFromServer = async () => {
        const response = await fetch('https://fykos.cz/rocnik36/sous-podzim/tv');
        const doc = new DOMParser().parseFromString(await response.text(), 'text/html');
        [...doc.querySelectorAll("#dokuwiki__content li")].map(el => el.textContent);
        const content = Object.values(text).join(' &#8226; ');
        document.getElementById('content').innerHTML = content;
        document.getElementById('content').style.animation = 'marquee ' + content.length/10 + 's linear infinite';
    }

    setInterval(updateFromServer, 1000);
    updateFromServer();
</script>
</html>